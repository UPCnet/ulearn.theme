<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="ulearn">

<head>
  <metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1);"/>
</head>

<body>

  <metal:main metal:fill-slot="main"
              tal:define="b_start python:0;
                         b_start request/b_start | b_start;
                         communities python: view.get_batched_communities(b_start=b_start);">

    <div id="searchcommunities">
      <div class="input-append">
        <input class="searchInput" type="text">
        <button class="btn" type="button" i18n:translate="">Search</button>
      </div>
    </div>

    <section id="communitylist">
      <ul>
        <li tal:repeat="community communities">
          <div class="eines pull-right">
          <a class=""
             tal:condition="python:view.is_community_manager(community)"
             tal:attributes="href string:${community/getURL}/edit">
            <i class="fa-icon-pencil"></i>
          </a>
          <a class="favorite" href="#"
             tal:attributes="data-community string:${community/getURL}">
            <i tal:attributes="class python:view.get_star_class(community)"></i>
          </a>
          </div>
          <div class="item">
            <a tal:attributes="href community/getURL">
              <img class="pull-left"
                   tal:condition="community/image_filename"
                   tal:attributes="src string:${community/getURL}/@@images/image/tile"/>
              <img class="pull-left"
                   src="/++ulearn++static/images/avatar_default.png"
                   tal:condition="not: community/image_filename"/>
              <h4 tal:content="community/Title">Community</h4>
              <p tal:content="community/Description">Description</p>
            </a>
          </div>
        </li>
      </ul>
    </section>

    <tal:batchnavigation
      define="batchnavigation nocall:context/@@batchnavigation"
      replace="structure python:batchnavigation(communities)" />

  </metal:main>
</body>
</html>
