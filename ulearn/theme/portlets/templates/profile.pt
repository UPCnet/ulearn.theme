<tal:profile tal:define="is_community view/community_mode">
<div id="box_community" class="ulearnbox"
     tal:condition="is_community"
     tal:define="community view/get_community">
    <div id="user">
        <h2 tal:content="community/title">Ricard Grau</h2>
        <p><span class="dades currentactivity"
                 tal:content="python:view.get_thinnkins(community=community)">256</span> thinnkins</p>
    </div>
    <div class="row-fluid">
        <div class="span12"
             tal:define="image nocall:context/image">
            <img alt="User"
                 tal:attributes="src string:${community/absolute_url}/@@download/image/${community/image/filename}"
                 tal:condition="nocall:image"/>
            <img alt="User"
                 src="/++ulearn++static/images/avatar_default.png"
                 tal:condition="nocall:not:image"/>
        </div>
    </div>

    <div class="btn-group contentaddtoolbar"
         tal:define="types view/get_addable_types">
        <tal:buttons repeat="type types">
            <a class="btn" rel="tooltip" data-placement="bottom"
               tal:attributes="href type/action;
                               title type/description">
                <i tal:attributes="class string:icon-${type/extra/id}"></i>
            </a>
        </tal:buttons>
    </div>

    <p tal:condition="view/showEditCommunity">
      <button class="btn btn-large btn-comunitat"
              type="button"
              data-toggle="modal" data-remote="editCommunity" data-target="#editModal">
                <i class="fa-icon-pencil"></i>
                <tal:editcommunity i18n:translate="editcommunity">Edit this community</tal:editcommunity>
      </button>
    </p>

    <div id="editModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="editModalLabel" i18n:translate="editcommunity">Edit this community</h3>
      </div>
      <div class="modal-body">
        <p>One fine body…</p>
      </div>
    </div>

</div>

<div id="box_perfil" class="ulearnbox"
     tal:condition="not:is_community">
    <div id="user">
        <h2 tal:content="view/fullname">Ricard Grau</h2>
        <p><span class="dades currentactivity"
                 tal:content="view/get_thinnkins">256</span> thinnkins</p>
    </div>
    <div class="row-fluid">
        <div class="photo span9">
            <a tal:attributes="href string:${view/portal_url}/@@personal-information">
                <img tal:attributes="src string:${view/portal_url}/@@avatar/${view/username}" alt="User" >
            </a>
        </div>

        <div class="span3">
            <div tal:repeat="badge view/get_badges">
                <div class="box_badges"
                     tal:attributes="class python:'box_badges' if badge['awarded'] else 'box_badges novetat'">
                    <i class="fa-icon-trophy"
                       tal:attributes="class string:fa-icon-${badge/icon}"></i>
                </div>
            </div>
        </div>
    </div>
</div>

</tal:profile>
