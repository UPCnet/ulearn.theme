<tal:profile tal:define="is_community view/community_mode" i18n:domain="ulearn">
<tal:iscommunity condition="is_community">
<div id="box_community" class="ulearnbox"
     tal:define="community view/get_community;
                 community_hash python:view.get_hash(community)">

    <div class="osomcorner-wrapper"><div class="osomcorner"></div></div>

    <div id="user">
        <h2 tal:content="community/title">Ricard Grau</h2>
        <p>
          <span class="dades currentactivity">
          <max-activities-count object="context" community_hash="${community_hash}"></max-activities-count>
          </span>
           <span i18n:translate="" tal:content="view/get_posts_literal">thinnkins</span>
        </p>
    </div>
    <div class="row-fluid">
        <div class="span12"
             tal:define="image nocall:community/image">
            <img alt="User"
                 tal:attributes="src string:${community/absolute_url}/@@download/image/${community/image/filename}"
                 tal:condition="nocall:image"/>
            <img alt="User"
                 src="/++ulearn++static/images/avatar_default.png"
                 tal:condition="nocall:not:image"/>
        </div>
    </div>

    <div class="btn-group contentaddtoolbar"
         tal:define="types view/get_addable_types">
        <tal:buttons repeat="type types">
            <a class="btn" rel="tooltip" data-placement="bottom"
               tal:attributes="href type/action;
                               title type/description">
                <i tal:attributes="class string:icon-${type/extra/id}"></i>
            </a>
        </tal:buttons>
    </div>

    <div id="editModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="editModalLabel" i18n:domain="ulearn" i18n:translate="editcommunity">Edit this community</h3>
      </div>
      <div class="modal-body">
        <p>One fine body…</p>
      </div>
    </div>

    <p tal:condition="view/showEditCommunity">
      <a class="btn btn-large btn-comunitat" type="button" href="edit">
        <i class="fa fa-pencil"></i>
        <tal:editcommunity i18n:domain="ulearn" i18n:translate="editcommunity">Edit this community</tal:editcommunity>
      </a>
      <a class="btn btn-large btn-comunitat" type="button" href="editacl">
        <i class="fa fa-pencil"></i>
        <tal:editcommunityacl i18n:domain="ulearn" i18n:translate="">Subscripcions</tal:editcommunityacl>
      </a>
    </p>

</div>
</tal:iscommunity>

<tal:isprofile condition="not:is_community">
<div id="box_perfil" class="ulearnbox"
     tal:define="username view/username">

    <div class="osomcorner-wrapper"><div class="osomcorner"></div></div>

    <div id="user">
        <h2 tal:content="view/fullname">Ricard Grau</h2>
        <p>
          <span class="dades currentactivity">
            <max-activities-count object="user" username="${username}"></max-activities-count>
          </span>
          <span i18n:translate="" tal:content="view/get_posts_literal">thinnkins</span>
        </p>
    </div>
    <div class="row-fluid">
        <div class="photo span12">
            <a tal:attributes="href string:${view/portal_url}/@@personal-information">
                <img tal:attributes="src string:${view/portal_url}/@@avatar/${username}" alt="User" >
            </a>
        </div>
    </div>
    <div class="row-fluid">
        <div class="badges span12">
          <div class="box_badges">
            <badge image="badge1.png"
                   tal:attributes="enabled view/has_complete_profile">
            </badge>
            <badge image="badge2.png" threshold="1"></badge>
            <badge image="badge3.png" threshold="3"></badge>
            <badge image="badge4.png" threshold="5"></badge>
          </div>
<!--!             <tal:block repeat="badge view/get_badges">
                <div class="box_badges">
                  <img tal:attributes="src python:'{}/{}.png'.format(view.portal_url(), badge['png']) if badge['awarded'] else '{}/++ulearn++static/images/{}-alt.png'.format(view.portal_url(), badge['png'])" />
                </div>
            </tal:block> -->
        </div>
    </div>
</div>

</tal:isprofile>
</tal:profile>
